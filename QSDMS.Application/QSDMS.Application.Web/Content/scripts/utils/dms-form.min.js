$.SaveForm = function (a) { a = $.extend({ url: "", param: [], type: "post", dataType: "json", loading: "\u6b63\u5728\u5904\u7406\u6570\u636e...", success: null, close: !0 }, a); Loading(!0, a.loading); 0 < $("[name\x3d__RequestVerificationToken]").length && (a.param.__RequestVerificationToken = $("[name\x3d__RequestVerificationToken]").val()); window.setTimeout(function () { $.ajax({ url: a.url, data: a.param, type: a.type, dataType: a.dataType, success: function (b) { b.IsSuccess ? (Loading(!1), dialogMsg(b.Message, 1), a.success(b), 1 == a.close && dialogClose()) : dialogAlert(b.Message, -1) }, error: function (a, d, c) { Loading(!1); dialogMsg(c, -1) }, beforeSend: function () { Loading(!0, a.loading) }, complete: function () { Loading(!1) } }) }, 500) }; $.SetForm = function (a) { a = $.extend({ url: "", param: [], type: "get", dataType: "json", success: null, async: !1 }, a); $.ajax({ url: a.url, data: a.param, type: a.type, dataType: a.dataType, async: a.async, success: function (b) { b ? a.success(b) : dialogAlert("methed error", -1) }, error: function (a, d, c) { dialogMsg(c, -1) }, beforeSend: function () { Loading(!0) }, complete: function () { Loading(!1) } }) }; $.RemoveForm = function (a) { a = $.extend({ msg: "\u6ce8\uff1a\u60a8\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f\u8be5\u64cd\u4f5c\u5c06\u65e0\u6cd5\u6062\u590d", loading: "\u6b63\u5728\u5220\u9664\u6570\u636e...", url: "", param: [], type: "post", dataType: "json", success: null }, a); dialogConfirm(a.msg, function (b) { b && (Loading(!0, a.loading), window.setTimeout(function () { var b = a.param; 0 < $("[name\x3d__RequestVerificationToken]").length && (b.__RequestVerificationToken = $("[name\x3d__RequestVerificationToken]").val()); $.ajax({ url: a.url, data: b, type: a.type, dataType: a.dataType, success: function (c) { c.IsSuccess ? (dialogMsg(c.Message, 1), a.success(c)) : dialogAlert(c.Message, -1) }, error: function (a, b, d) { Loading(!1); dialogMsg(d, -1) }, beforeSend: function () { Loading(!0, a.loading) }, complete: function () { Loading(!1) } }) }, 500)) }) }; $.ConfirmAjax = function (a) { a = $.extend({ msg: "\u63d0\u793a\u4fe1\u606f", loading: "\u6b63\u5728\u5904\u7406\u6570\u636e...", url: "", param: [], type: "post", dataType: "json", success: null }, a); dialogConfirm(a.msg, function (b) { b && (Loading(!0, a.loading), window.setTimeout(function () { var b = a.param; 0 < $("[name\x3d__RequestVerificationToken]").length && (b.__RequestVerificationToken = $("[name\x3d__RequestVerificationToken]").val()); $.ajax({ url: a.url, data: b, type: a.type, dataType: a.dataType, success: function (b) { Loading(!1); b.IsSuccess ? (dialogMsg(b.Message, 1), a.success(b)) : dialogAlert(b.Message, -1) }, error: function (a, b, d) { Loading(!1); dialogMsg(d, -1) }, beforeSend: function () { Loading(!0, a.loading) }, complete: function () { Loading(!1) } }) }, 200)) }) }; $.ExistField = function (a, b, d) { var c = $("#" + a); if (!c.val()) return !1; var e = { keyValue: request("keyValue") }; e[a] = c.val(); a = $.extend(e, d); $.ajax({ url: b, data: a, type: "get", dataType: "text", async: !1, success: function (a) { "false" == a.toLocaleLowerCase() ? (ValidationMessage(c, "\u5df2\u5b58\u5728,\u8bf7\u91cd\u65b0\u8f93\u5165"), c.attr("fieldexist", "yes")) : c.attr("fieldexist", "no") }, error: function (a, b, c) { dialogMsg(c, -1) } }) };